<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tharki Gandhi Agency</title>

<style>
body{margin:0;padding:12px;background:#0b0b0b;color:#fff;font-family:Arial}
@media(min-width:768px){body{display:none}}
.card{background:#120000;border:2px solid #ff1a1a;border-radius:16px;padding:16px;margin-bottom:16px}
.card-top{display:flex;gap:14px;align-items:center}
.avatar{width:80px;height:80px;border-radius:50%;background-size:cover;background-position:center;border:2px solid #ff1a1a}
h2{margin:0;color:#ff4d4d}
p{margin:4px 0;color:#ccc}
.buttons{display:flex;gap:10px;margin-top:10px}
button{flex:1;padding:10px;border:none;border-radius:10px;background:#ff1a1a;color:#fff;font-weight:bold}
</style>
</head>

<body>

<div id="cards"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAJZ7e134Fnt3Cxe1aiDkFUg_Wv0ehpBA0",
  authDomain: "piyush-agency-b7949.firebaseapp.com",
  databaseURL: "https://piyush-agency-b7949-default-rtdb.firebaseio.com",
  projectId: "piyush-agency-b7949"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

function wa(n){window.open("https://wa.me/"+n,"_blank")}
function call(n){location.href="tel:"+n}

const cards=document.getElementById("cards");

onValue(ref(db,"agents"), snap=>{
 cards.innerHTML="";
 snap.forEach(c=>{
  const a=c.val();
  cards.innerHTML+=`
  <div class="card">
   <div class="card-top">
    <div class="avatar" style="background-image:url('${a.image}')"></div>
    <div>
     <h2>${a.name}</h2>
     <p>${a.desc}</p>
    </div>
   </div>
   <div class="buttons">
    <button onclick="wa('${a.whatsapp}')">WhatsApp</button>
    <button onclick="call('${a.phone}')">Call</button>
   </div>
  </div>`;
 });
});
</script>

</body>
</html>
